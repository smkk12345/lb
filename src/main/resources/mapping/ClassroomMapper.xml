<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.longbei.appservice.dao.ClassroomMapper" >
  <resultMap id="BaseResultMap" type="com.longbei.appservice.entity.Classroom" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="classroomid" property="classroomid" jdbcType="INTEGER" />
    <result column="classtitle" property="classtitle" jdbcType="VARCHAR" />
    <result column="classphotos" property="classphotos" jdbcType="VARCHAR" />
    <result column="classcateid" property="classcateid" jdbcType="INTEGER" />
    <result column="classinvoloed" property="classinvoloed" jdbcType="INTEGER" />
    <result column="classlimited" property="classlimited" jdbcType="INTEGER" />
    <result column="classbrief" property="classbrief" jdbcType="VARCHAR" />
    <result column="classnotice" property="classnotice" jdbcType="VARCHAR" />
    <result column="createtime" property="createtime" jdbcType="TIMESTAMP" />
    <result column="updatetime" property="updatetime" jdbcType="TIMESTAMP" />
    <result column="ptype" property="ptype" />
    <result column="ispublic" property="ispublic" jdbcType="CHAR" />
    <result column="userid" property="userid" />
    <result column="cardid" property="cardid" />
    <result column="charge" property="charge" jdbcType="INTEGER" />
    <result column="isfree" property="isfree" jdbcType="CHAR" />
    <result column="freecoursenum" property="freecoursenum" jdbcType="INTEGER" />
    <result column="classroomid" property="classroomid" jdbcType="INTEGER" />
    <result column="isdel" property="isdel" />
    <result column="sourcetype" property="sourcetype" />
    <result column="isrecommend" property="isrecommend" />
    <result column="isup" property="isup" />
    <result column="classtype" property="classtype" />
    <result column="cusername" property="cusername" />
    <result column="closedate" property="closedate" />
    <result column="closeremark" property="closeremark" />
    <result column="syllabus" property="syllabus" />
    <result column="crowd" property="crowd" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, classroomid, classtitle, classphotos, classcateid, classinvoloed, classlimited, classbrief, 
    classnotice, createtime, updatetime, ptype, classtype, ispublic, userid, cardid, 
    charge, isfree, freecoursenum, isdel, sourcetype, isrecommend, isup, cusername, 
    closedate, closeremark, syllabus, crowd 
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where classroomid = #{classroomid,jdbcType=INTEGER}
  </select>
  
  <select id="selectClassroomListByIspublic" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where isdel = 0 and isup = 1 
    <if test="ptype != null and ptype != ''" >
      and ptype = #{ptype}
    </if>
    <if test="ispublic != null and ispublic != ''" >
    	and ispublic = #{ispublic}
    </if>
    order by createtime desc 
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <select id="selectCount" resultType="java.lang.Integer" >
    select count(*) 
    from classroom
    where 1 = 1 
    <if test="isup != null and isup != ''" >
      and isup = #{isup}
    </if>
    <if test="isdel != null and isdel != ''" >
    	and isdel = #{isdel}
    </if>
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <select id="selectSearchCount" parameterType="com.longbei.appservice.entity.Classroom" resultType="java.lang.Integer" >
    select count(*) 
    from classroom
    where 1 = 1 
    <if test="isup != null and isup != ''" >
      and isup = #{isup}
    </if>
    <if test="isdel != null and isdel != ''" >
    	and isdel = #{isdel}
    </if>
    <if test="classtitle != null and classtitle != ''" >
    	and classtitle LIKE concat(concat('%',#{classtitle}),'%')
    </if>
    <if test="sourcetype != null and sourcetype != ''" >
    	and sourcetype = #{sourcetype}
    </if>
    <if test="ptype != null and ptype != ''" >
    	and ptype = #{ptype}
    </if>
    <if test="classtype != null and classtype != ''" >
    	and classtype = #{classtype}
    </if>
    <if test="isfree != null and isfree != ''" >
    	and isfree = #{isfree}
    </if>
    <if test="cusername != null and cusername != ''" >
    	and cusername LIKE concat(concat('%',#{cusername}),'%')
    </if>
  </select>
  
  <select id="selectSearchList" parameterType="com.longbei.appservice.entity.Classroom" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where 1 = 1 
    <if test="classroom.isup != null and classroom.isup != ''" >
      and isup = #{classroom.isup}
    </if>
    <if test="classroom.isdel != null and classroom.isdel != ''" >
    	and isdel = #{classroom.isdel}
    </if>
    <if test="classroom.classtitle != null and classroom.classtitle != ''" >
    	and classtitle LIKE concat(concat('%',#{classroom.classtitle}),'%')
    </if>
    <if test="classroom.sourcetype != null and classroom.sourcetype != ''" >
    	and sourcetype = #{classroom.sourcetype}
    </if>
    <if test="classroom.ptype != null and classroom.ptype != ''" >
    	and ptype = #{classroom.ptype}
    </if>
    <if test="classroom.classtype != null and classroom.classtype != ''" >
    	and classtype = #{classroom.classtype}
    </if>
    <if test="classroom.isfree != null and classroom.isfree != ''" >
    	and isfree = #{classroom.isfree}
    </if>
    <if test="classroom.cusername != null and classroom.cusername != ''" >
    	and cusername LIKE concat(concat('%',#{classroom.cusername}),'%')
    </if>
    order by createtime desc 
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <select id="selectClassroomList" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where 1 = 1 
    <if test="isup != null and isup != ''" >
      and isup = #{isup}
    </if>
    <if test="isdel != null and isdel != ''" >
    	and isdel = #{isdel}
    </if>
    order by createtime desc 
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <select id="selectListByUserid" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where
    isdel = 0
    <if test="userid != null and userid != ''" >
      and userid = #{userid}
    </if>
    <if test="ptype != null and ptype != ''" >
    	and ptype = #{ptype} 
    </if>
    order by createtime desc 
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <select id="selectListByPtype" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from classroom
    where isdel = 0
    <if test="keyword != null" >
    	AND (classtitle LIKE CONCAT(CONCAT('%', #{keyword}),'%'))
    	<!--  
       	or classbrief LIKE CONCAT(CONCAT('%', #{keyword}),'%')
       	or classnotice LIKE CONCAT(CONCAT('%', #{keyword}),'%') -->
    </if>
    <if test="ptype != null" >
    	and ptype = #{ptype} 
    </if>
    and isup = 1 
    order by createtime desc 
    <if test="endNum != 0" >
      limit #{startNum},#{endNum}
    </if>
  </select>
  
  <delete id="deleteByPrimaryKey" >
    delete from classroom
    where classroomid = #{classroomid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.longbei.appservice.entity.Classroom" >
    insert into classroom (id, classroomid, userid, classtitle, classphotos, 
      classcateid, classinvoloed, classlimited, 
      classbrief, classnotice, 
      createtime, updatetime, ptype, classtype, ispublic, charge, isfree, freecoursenum
      )
    values (#{id,jdbcType=INTEGER}, #{classroomid,jdbcType=INTEGER}, #{userid,jdbcType=INTEGER}, 
    	#{classtitle,jdbcType=VARCHAR}, 
      #{classphotos,jdbcType=VARCHAR}, 
      #{classcateid,jdbcType=INTEGER}, #{classinvoloed,jdbcType=INTEGER}, #{classlimited,jdbcType=INTEGER}, 
      #{classbrief,jdbcType=VARCHAR}, #{classnotice,jdbcType=VARCHAR}, 
      #{createtime,jdbcType=TIMESTAMP}, #{updatetime,jdbcType=TIMESTAMP}, #{ptype,jdbcType=CHAR}, #{classtype}, 
      #{ispublic,jdbcType=CHAR}, 
      #{charge,jdbcType=INTEGER}, #{isfree,jdbcType=CHAR}, #{freecoursenum,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.longbei.appservice.entity.Classroom" >
    insert into classroom
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="classroomid != null" >
        classroomid,
      </if>
      <if test="userid != null" >
        userid,
      </if>
      <if test="cardid != null" >
        cardid,
      </if>
      <if test="classtitle != null" >
        classtitle,
      </if>
      <if test="classphotos != null" >
        classphotos,
      </if>
      <if test="classcateid != null" >
        classcateid,
      </if>
      <if test="classinvoloed != null" >
        classinvoloed,
      </if>
      <if test="classlimited != null" >
        classlimited,
      </if>
      <if test="classbrief != null" >
        classbrief,
      </if>
      <if test="classnotice != null" >
        classnotice,
      </if>
      <if test="createtime != null" >
        createtime,
      </if>
      <if test="updatetime != null" >
        updatetime,
      </if>
      <if test="ptype != null" >
        ptype,
      </if>
      <if test="classtype != null" >
        classtype,
      </if>
      <if test="ispublic != null" >
        ispublic,
      </if>
      <if test="charge != null" >
        charge,
      </if>
      <if test="isfree != null" >
        isfree,
      </if>
      <if test="freecoursenum != null" >
        freecoursenum,
      </if>
      <if test="isup != null" >
        isup,
      </if>
      <if test="sourcetype != null" >
        sourcetype,
      </if>
      <if test="cusername != null" >
        cusername,
      </if>
      <if test="closedate != null" >
        closedate,
      </if>
      <if test="syllabus != null" >
        syllabus,
      </if>
      <if test="crowd != null" >
        crowd,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="classroomid != null" >
        #{classroomid,jdbcType=INTEGER},
      </if>
      <if test="userid != null" >
        #{userid},
      </if>
      <if test="cardid != null" >
        #{cardid},
      </if>
      <if test="classtitle != null" >
        #{classtitle,jdbcType=VARCHAR},
      </if>
      <if test="classphotos != null" >
        #{classphotos,jdbcType=VARCHAR},
      </if>
      <if test="classcateid != null" >
        #{classcateid,jdbcType=INTEGER},
      </if>
      <if test="classinvoloed != null" >
        #{classinvoloed,jdbcType=INTEGER},
      </if>
      <if test="classlimited != null" >
        #{classlimited,jdbcType=INTEGER},
      </if>
      <if test="classbrief != null" >
        #{classbrief,jdbcType=VARCHAR},
      </if>
      <if test="classnotice != null" >
        #{classnotice,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatetime != null" >
        #{updatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="ptype != null" >
        #{ptype,jdbcType=CHAR},
      </if>
      <if test="classtype != null and classtype != ''" >
        #{classtype},
      </if>
      <if test="ispublic != null" >
        #{ispublic,jdbcType=CHAR},
      </if>
      <if test="charge != null" >
        #{charge},
      </if>
      <if test="isfree != null" >
        #{isfree},
      </if>
      <if test="freecoursenum != null" >
        #{freecoursenum},
      </if>
      <if test="isup != null and isup != ''" >
        #{isup},
      </if>
      <if test="sourcetype != null and sourcetype != ''" >
        #{sourcetype},
      </if>
      <if test="cusername != null and cusername != ''" >
        #{cusername},
      </if>
      <if test="closedate != null" >
        #{closedate},
      </if>
      <if test="syllabus != null and syllabus != ''" >
        #{syllabus},
      </if>
      <if test="crowd != null and crowd != ''" >
        #{crowd},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.longbei.appservice.entity.Classroom" >
    update classroom
    <set >
      <if test="classtitle != null" >
        classtitle = #{classtitle,jdbcType=VARCHAR},
      </if>
      <if test="classphotos != null" >
        classphotos = #{classphotos,jdbcType=VARCHAR},
      </if>
      <if test="classcateid != null" >
        classcateid = #{classcateid,jdbcType=INTEGER},
      </if>
      <if test="classinvoloed != null" >
        classinvoloed = #{classinvoloed,jdbcType=INTEGER},
      </if>
      <if test="classlimited != null" >
        classlimited = #{classlimited,jdbcType=INTEGER},
      </if>
      <if test="classbrief != null" >
        classbrief = #{classbrief,jdbcType=VARCHAR},
      </if>
      <if test="classnotice != null" >
        classnotice = #{classnotice,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        createtime = #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatetime != null" >
        updatetime = #{updatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="ptype != null" >
        ptype = #{ptype,jdbcType=CHAR},
      </if>
      <if test="charge != null" >
        charge = #{charge},
      </if>
      <if test="isfree != null" >
        isfree = #{isfree},
      </if>
      <if test="freecoursenum != null" >
        freecoursenum = #{freecoursenum},
      </if>
      <if test="cardid != null" >
        cardid = #{cardid},
      </if>
      <if test="ispublic != null" >
        ispublic = #{ispublic,jdbcType=CHAR}
      </if>
    </set>
    where classroomid = #{classroomid,jdbcType=INTEGER} 
    	and userid = #{userid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.longbei.appservice.entity.Classroom" >
    update classroom
    set classtitle = #{classtitle,jdbcType=VARCHAR},
      classphotos = #{classphotos,jdbcType=VARCHAR},
      classcateid = #{classcateid,jdbcType=INTEGER},
      classinvoloed = #{classinvoloed,jdbcType=INTEGER},
      classlimited = #{classlimited,jdbcType=INTEGER},
      classbrief = #{classbrief,jdbcType=VARCHAR},
      classnotice = #{classnotice,jdbcType=VARCHAR},
      createtime = #{createtime,jdbcType=TIMESTAMP},
      updatetime = #{updatetime,jdbcType=TIMESTAMP},
      ptype = #{ptype,jdbcType=CHAR}, 
      charge = #{charge,jdbcType=INTEGER},
      isfree = #{isfree,jdbcType=CHAR},
      cardid = #{cardid},
      freecoursenum = #{freecoursenum,jdbcType=INTEGER},
      ispublic = #{ispublic,jdbcType=CHAR} 
    where classroomid = #{classroomid,jdbcType=INTEGER} 
    and userid = #{userid,jdbcType=INTEGER}
  </update>
  
  <update id="updateClassnoticeByClassroomid" >
    update classroom
    set 
      classnotice = #{classnotice},
      updatetime = #{updatetime} 
    where classroomid = #{classroomid} 
  </update>
  
  <update id="updateClassinvoloedByClassroomid" >
    update classroom
    set 
      classinvoloed = classinvoloed + #{num} 
    where classroomid = #{classroomid} 
  </update>
  
  <update id="updateIsfreeByClassroomid" >
    update classroom
    set 
      <if test="charge != null" >
        charge = #{charge},
      </if>
      <if test="freecoursenum != null" >
        freecoursenum = #{freecoursenum},
      </if>
      isfree = #{isfree} 
    where classroomid = #{classroomid} 
  </update>
  
  <update id="updateIsdel" >
    update classroom
    set 
      <if test="closeremark != null and closeremark != ''" >
        closeremark = #{closeremark},
      </if>
      closedate = #{closedate}, 
      isdel = 1 
    where classroomid = #{classroomid} 
  </update>
  
  <update id="updateIsup" >
    update classroom
    set 
      isup = 1 
    where classroomid = #{classroomid} 
  </update>
  
</mapper>